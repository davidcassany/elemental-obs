# Charts repository
%if "%_repository" == "charts" || "%_repository" == "charts_Micro_61"
Type: helm
Repotype: none
Patterntype: none
Required: perl-YAML-LibYAML
%endif

%if "%_repository" == "containerkiwi" || "%_repository" == "containerkiwi_Micro_61"
Type: kiwi
Repotype: slepool:nobuildid
Patterntype: none
%endif

# Container images are build in 'containers' repository
# ISO images are build in 'containers' repository too
%if "%_repository" == "containers" || "%_repository" == "containers_Micro_61"
Required: elemental-post-build-extract-iso
Repotype: staticlinks

Type: docker
BuildEngine: docker

Prefer: registries-conf-suse
Prefer: kernel-default
%endif

%if "%_repository" == "containers" || "%_repository" == "charts"
Macros:
%img_repo %(echo registry.suse.de:%{_project}:containers | tr ":" "/" | tr '[:upper:]' '[:lower:]')
%slmicro_version 6.2
:Macros

BuildFlags: dockerarg:SLMICRO_VERSION=6.2
%endif

%if "%_repository" == "containers_Micro_61" || "%_repository" == "charts_Micro_61"
Macros:
%img_repo %(echo registry.suse.de:%{_project}:containers | tr ":" "/" | tr '[:upper:]' '[:lower:]')
%slmicro_version 6.1
:Macros

BuildFlags: dockerarg:SLMICRO_VERSION=6.1
%endif
